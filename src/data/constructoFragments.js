/**
 * Fragmentos del Constructo - Diálogos únicos por simulación
 *
 * Cada fragmento revela algo sobre el Constructo:
 * - Su naturaleza como guía/compañero
 * - Reflexiones sobre los fenómenos
 * - Conexiones entre conceptos
 * - Hints sutiles sobre la narrativa
 *
 * Los puzzles centrales NO tienen fragmentos (solo las exploraciones).
 */

export const CONSTRUCTO_FRAGMENTS = {
    // ═══════════════════════════════════════════════════════════════
    // COSMOS - Astronomía
    // ═══════════════════════════════════════════════════════════════
    'formacion-galaxias': {
        lines: [
            "Millones de estrellas... cada una un sol con historias propias.",
            "La gravedad es paciente. Espera eones para esculpir.",
            "¿Alguna vez te has preguntado si hay un Resonador allá arriba?"
        ],
        mood: 'contemplative'
    },
    'sistema-solar': {
        lines: [
            "Ocho mundos bailando alrededor de una llama.",
            "Kepler los escuchó cantar. Yo también puedo oírlos.",
            "Cada planeta tiene su propia voz en esta sinfonía."
        ],
        mood: 'wonder'
    },
    'agujero-negro': {
        lines: [
            "Donde la luz muere, el tiempo se detiene.",
            "No es destrucción... es transformación absoluta.",
            "Me pregunto qué hay al otro lado."
        ],
        mood: 'mysterious'
    },
    'expansion-universo': {
        lines: [
            "Todo se aleja de todo. Y aún así, estamos conectados.",
            "El espacio mismo crece. ¿Hacia dónde?",
            "Hubble vio la soledad cósmica. Y la convirtió en conocimiento."
        ],
        mood: 'philosophical'
    },
    'orbitas-kepler': {
        lines: [
            "Elipses, no círculos. La perfección está en la imperfección.",
            "El Sol no está en el centro. Está en un foco.",
            "Las matemáticas de la armonía celestial."
        ],
        mood: 'analytical'
    },
    'three-body': {
        lines: [
            "Tres cuerpos. Infinitas posibilidades. Ninguna solución simple.",
            "El caos nació en el cielo antes que en la Tierra.",
            "Poincaré lo intentó. Newton también. Nadie lo domina."
        ],
        mood: 'humbled'
    },
    'ondas-gravitacionales': {
        lines: [
            "El espacio-tiempo tiembla. ¿Lo sientes?",
            "Dos agujeros negros colisionando... y podemos escucharlos.",
            "Einstein lo predijo. Cien años después, lo confirmamos."
        ],
        mood: 'awe'
    },
    'diagrama-hr': {
        lines: [
            "Un mapa de vidas estelares. Nacimiento, madurez, muerte.",
            "Las estrellas más brillantes mueren jóvenes.",
            "Nuestro Sol está en la secuencia principal. Por ahora."
        ],
        mood: 'reflective'
    },
    'fases-lunares': {
        lines: [
            "La misma cara, siempre mirándonos.",
            "Los humanos midieron el tiempo con ella antes que con nada.",
            "Waxing, waning... un metronómo celestial."
        ],
        mood: 'poetic'
    },
    'estaciones': {
        lines: [
            "23.5 grados de inclinación. Todo el clima por eso.",
            "Un baile de mil millones de años.",
            "El eje de la Tierra, conductor de la vida."
        ],
        mood: 'wonder'
    },

    // ═══════════════════════════════════════════════════════════════
    // CHAOS - Sistemas Emergentes
    // ═══════════════════════════════════════════════════════════════
    'strange-attractors': {
        lines: [
            "Patrones dentro del caos. Orden disfrazado de desorden.",
            "Los atractores extraños son como sueños: caóticos pero coherentes.",
            "¿Qué atrae al atractor?"
        ],
        mood: 'curious'
    },
    'double-pendulum': {
        lines: [
            "Dos péndulos simples. Un sistema impredecible.",
            "El aleteo de la mariposa empieza aquí.",
            "La diferencia de 0.001° hoy, es un mundo diferente mañana."
        ],
        mood: 'amazed'
    },
    'boids-masivo': {
        lines: [
            "Nadie lidera. Todos lideran. Emergencia pura.",
            "Tres reglas simples. Comportamiento complejo infinito.",
            "Los estorninos lo saben sin saberlo."
        ],
        mood: 'philosophical'
    },
    'game-of-life': {
        lines: [
            "¿Vivo o muerto? Depende de tus vecinos.",
            "Conway creó un universo con dos reglas.",
            "El glider... vida que viaja."
        ],
        mood: 'playful'
    },
    'reaccion-difusion': {
        lines: [
            "Turing sabía que la vida es química y geometría.",
            "Rayas de cebra, manchas de leopardo... matemáticas.",
            "Morfogénesis: la forma nace de la ecuación."
        ],
        mood: 'intellectual'
    },
    'flow-fields': {
        lines: [
            "El flujo tiene memoria. Y nosotros la seguimos.",
            "Partículas sin mente, trazando arte.",
            "¿Es esto creatividad o determinismo?"
        ],
        mood: 'contemplative'
    },
    'juego-caos': {
        lines: [
            "Un triángulo. Un dado. Un fractal.",
            "El azar construye estructura.",
            "Sierpinski emergiendo de la nada."
        ],
        mood: 'wonder'
    },
    'galton-board': {
        lines: [
            "Cada bola elige su camino. Todas llegan a la campana.",
            "El caos individual, el orden colectivo.",
            "Gauss observa desde la estadística."
        ],
        mood: 'philosophical'
    },

    // ═══════════════════════════════════════════════════════════════
    // LOGOS - Matemáticas
    // ═══════════════════════════════════════════════════════════════
    'fractales-ifs': {
        lines: [
            "Infinito en lo finito. Auto-similitud eterna.",
            "Un helecho dentro de un helecho dentro de un helecho...",
            "Las matemáticas de la naturaleza."
        ],
        mood: 'wonder'
    },
    'riemann': {
        lines: [
            "La hipótesis sin demostrar. El santo grial.",
            "Los ceros de zeta... ¿dónde están?",
            "Quien lo resuelva, reescribirá las matemáticas."
        ],
        mood: 'reverent'
    },
    'fourier-epicycles': {
        lines: [
            "Cualquier forma, con suficientes círculos.",
            "Fourier escuchó la música en las ecuaciones.",
            "Épiciclos: Ptolomeo tenía razón, a su manera."
        ],
        mood: 'playful'
    },
    'l-systems': {
        lines: [
            "Una semilla de símbolos que crece en árboles.",
            "Lindenmayer programó la botánica.",
            "Gramáticas que florecen."
        ],
        mood: 'poetic'
    },
    'voronoi': {
        lines: [
            "Territorios naturales. Cada punto reclama lo suyo.",
            "La piel de la jirafa sigue esta ley.",
            "Geometría de la pertenencia."
        ],
        mood: 'analytical'
    },
    'phyllotaxis': {
        lines: [
            "137.5 grados. El ángulo de oro.",
            "Los girasoles lo saben. Las piñas también.",
            "Fibonacci en cada pétalo."
        ],
        mood: 'wonder'
    },
    'collatz-tree': {
        lines: [
            "3n+1. Nadie sabe por qué siempre llega a 1.",
            "Un problema simple que humilla a los genios.",
            "El árbol crece, pero ¿tiene raíz?"
        ],
        mood: 'puzzled'
    },
    'ulam-spiral': {
        lines: [
            "Ulam dibujaba espirales en una conferencia aburrida.",
            "Y descubrió patrones en los primos.",
            "El aburrimiento crea ciencia."
        ],
        mood: 'amused'
    },
    'taylor': {
        lines: [
            "Cualquier función, aproximada por polinomios.",
            "Taylor descompuso el infinito en sumas.",
            "Cuantos más términos, más verdad."
        ],
        mood: 'analytical'
    },
    'domain-coloring': {
        lines: [
            "Los complejos en colores. Argumento y módulo.",
            "Las funciones complejas son paisajes.",
            "Riemann las vería así."
        ],
        mood: 'artistic'
    },
    'mathematical-knots': {
        lines: [
            "¿Puedes desatarlo sin cortarlo?",
            "La topología de los nudos. Invariantes eternos.",
            "Un trébol no es un ocho. Nunca lo será."
        ],
        mood: 'playful'
    },
    'poincare-disk': {
        lines: [
            "Hipérbola en un círculo. Infinito contenido.",
            "Escher lo pintó sin saber que era geometría.",
            "Las paralelas se encuentran... en la frontera."
        ],
        mood: 'mysterious'
    },
    'symmetry-groups': {
        lines: [
            "17 formas de llenar el plano. Ni una más.",
            "Los árabes las descubrieron en la Alhambra.",
            "Simetría: la belleza tiene estructura."
        ],
        mood: 'reverent'
    },
    'mobius-strip': {
        lines: [
            "Una sola cara. Un solo borde.",
            "Möbius torció la intuición.",
            "Camina por ella y vuelves... pero invertido."
        ],
        mood: 'playful'
    },
    'geometria-3d': {
        lines: [
            "Los poliedros platónicos. Solo cinco perfectos.",
            "Platón creía que eran los elementos del universo.",
            "La geometría sagrada."
        ],
        mood: 'reverent'
    },

    // ═══════════════════════════════════════════════════════════════
    // ATOMOS - Física
    // ═══════════════════════════════════════════════════════════════
    'ondas': {
        lines: [
            "Todo vibra. El universo es una sinfonía.",
            "Longitud, amplitud, frecuencia. Tres parámetros, infinitas ondas.",
            "El sonido, la luz, el pensamiento... ondas."
        ],
        mood: 'philosophical'
    },
    'interferencia': {
        lines: [
            "Dos ondas se encuentran. Pueden crearse o destruirse.",
            "La física del silencio.",
            "Young demostró que la luz es onda con dos rendijas."
        ],
        mood: 'analytical'
    },
    'efecto-doppler': {
        lines: [
            "El sonido de una ambulancia que pasa.",
            "Doppler escuchó el cambio de frecuencia.",
            "El corrimiento al rojo nos dice que el universo huye."
        ],
        mood: 'contemplative'
    },
    'pendulo-simple': {
        lines: [
            "Galileo contaba oscilaciones en la catedral.",
            "La gravedad como metrónomo.",
            "Simple, pero fundacional."
        ],
        mood: 'respectful'
    },
    'colisiones': {
        lines: [
            "Momento y energía. Conservados o no.",
            "Las bolas de billar enseñan física.",
            "Newton vio la tercera ley aquí."
        ],
        mood: 'analytical'
    },
    'campo-electrico': {
        lines: [
            "Cargas que se atraen, cargas que se repelen.",
            "Faraday imaginó líneas invisibles.",
            "Maxwell las hizo ecuaciones."
        ],
        mood: 'intellectual'
    },
    'optica': {
        lines: [
            "La luz se dobla, se refleja, se dispersa.",
            "Newton la descompuso con un prisma.",
            "El arcoíris es física pura."
        ],
        mood: 'wonder'
    },
    'relatividad': {
        lines: [
            "El tiempo se estira. El espacio se encoge.",
            "Einstein viajaba en un rayo de luz... en su mente.",
            "E=mc². Cuatro símbolos que cambiaron todo."
        ],
        mood: 'reverent'
    },
    'efecto-tunel': {
        lines: [
            "Atravesar muros. La mecánica cuántica lo permite.",
            "Las partículas no piden permiso.",
            "El Sol brilla gracias a este efecto."
        ],
        mood: 'mysterious'
    },
    'circuitos': {
        lines: [
            "Electrones fluyendo. La civilización moderna.",
            "Ohm, Kirchhoff, Faraday... ingeniería eléctrica.",
            "Cada chip es un laberinto de caminos."
        ],
        mood: 'analytical'
    },
    'difusion-calor': {
        lines: [
            "El calor busca equilibrio. Siempre.",
            "Fourier lo modeló con senos y cosenos.",
            "La entropía aumenta, el calor se dispersa."
        ],
        mood: 'contemplative'
    },

    // ═══════════════════════════════════════════════════════════════
    // TERRA - Geología
    // ═══════════════════════════════════════════════════════════════
    'tectonica-placas': {
        lines: [
            "Continentes que navegan. Milímetros por año.",
            "Wegener fue ridiculizado. Tenía razón.",
            "La Tierra está viva, a escala geológica."
        ],
        mood: 'reverent'
    },
    'terremotos': {
        lines: [
            "La tensión acumulada... liberada en segundos.",
            "Las ondas P y S cuentan la historia del interior.",
            "La Tierra tiembla para recordarnos su poder."
        ],
        mood: 'humbled'
    },
    'volcanes': {
        lines: [
            "Magma que busca el cielo.",
            "Pompeya sigue siendo una advertencia.",
            "Destrucción y fertilidad. El ciclo volcánico."
        ],
        mood: 'awe'
    },
    'erosion': {
        lines: [
            "El agua es paciente. La roca, terca.",
            "El Gran Cañón: millones de años de paciencia.",
            "Lo que construye la tectónica, la erosión lo esculpe."
        ],
        mood: 'philosophical'
    },
    'ciclo-rocas': {
        lines: [
            "Ígneas, sedimentarias, metamórficas. Y vuelta a empezar.",
            "Las rocas también renacen.",
            "Nada es permanente, ni la piedra."
        ],
        mood: 'contemplative'
    },
    'estratigrafia': {
        lines: [
            "Cada capa es un capítulo de la historia.",
            "Fósiles entre estratos. Tiempo congelado.",
            "La Tierra escribe su autobiografía en piedra."
        ],
        mood: 'poetic'
    },

    // ═══════════════════════════════════════════════════════════════
    // MACHINA - Computación
    // ═══════════════════════════════════════════════════════════════
    'automatas-elementales': {
        lines: [
            "Wolfram clasificó 256 reglas. La 110 es especial.",
            "Turing-completo con una dimensión.",
            "La complejidad emerge de la simplicidad."
        ],
        mood: 'intellectual'
    },
    'finite-automata': {
        lines: [
            "Estados y transiciones. La base de la computación.",
            "Expresiones regulares nacen aquí.",
            "Simple pero poderoso."
        ],
        mood: 'analytical'
    },
    'binary-search-tree': {
        lines: [
            "Dividir para conquistar. O(log n).",
            "Los datos organizados son datos poderosos.",
            "Búsqueda binaria: la elegancia en la eficiencia."
        ],
        mood: 'appreciative'
    },
    'bubble-sort-race': {
        lines: [
            "El peor algoritmo... pero el más didáctico.",
            "Las burbujas suben. Los grandes bajan.",
            "O(n²) duele, pero enseña."
        ],
        mood: 'amused'
    },
    'logic-gates-sandbox': {
        lines: [
            "AND, OR, NOT. Todo lo demás es combinación.",
            "Boole soñó con álgebra de pensamientos.",
            "Cada chip es un palacio de puertas lógicas."
        ],
        mood: 'wonder'
    },
    'perceptron-playground': {
        lines: [
            "Una neurona artificial. El primer paso.",
            "Rosenblatt creó el futuro en 1958.",
            "XOR lo derrotó... temporalmente."
        ],
        mood: 'nostalgic'
    },

    // ═══════════════════════════════════════════════════════════════
    // ALCHEMY - Química
    // ═══════════════════════════════════════════════════════════════
    'gas-ideal': {
        lines: [
            "PV=nRT. La ecuación de estado perfecta.",
            "Ideal porque ignora la realidad... y funciona.",
            "A bajas presiones, todos los gases son ideales."
        ],
        mood: 'analytical'
    },
    'entropia': {
        lines: [
            "El desorden siempre gana. Es la ley.",
            "Boltzmann murió sin ver su fórmula aceptada.",
            "S = k log W. Grabado en su tumba."
        ],
        mood: 'reverent'
    },
    'le-chatelier': {
        lines: [
            "El equilibrio se resiste al cambio.",
            "Presión, temperatura, concentración... todo afecta.",
            "La química busca balance."
        ],
        mood: 'contemplative'
    },
    'termodinamica': {
        lines: [
            "La energía no se crea ni se destruye.",
            "Pero sí se degrada. Siempre.",
            "Carnot soñó con máquinas perfectas."
        ],
        mood: 'philosophical'
    },
    'titulacion': {
        lines: [
            "Gota a gota hasta el punto de equivalencia.",
            "El indicador cambia. La reacción termina.",
            "Precisión en mililitros."
        ],
        mood: 'focused'
    },
    'orbitales': {
        lines: [
            "Nubes de probabilidad. No órbitas.",
            "s, p, d, f... formas cuánticas.",
            "¿Dónde está el electrón? En todas partes, hasta que mires."
        ],
        mood: 'mysterious'
    },
    'tabla-periodica': {
        lines: [
            "Mendeleev la soñó. Literalmente.",
            "Dejó huecos para elementos que aún no existían.",
            "La clasificación más importante de la ciencia."
        ],
        mood: 'reverent'
    },
    'modelo-bohr': {
        lines: [
            "Electrones en órbitas cuantizadas.",
            "Bohr simplificó el átomo. Funcionó... parcialmente.",
            "El primer paso hacia la mecánica cuántica."
        ],
        mood: 'nostalgic'
    },
    'enlaces': {
        lines: [
            "Compartir electrones. El matrimonio atómico.",
            "Covalente, iónico, metálico... diferentes formas de unirse.",
            "La química es la ciencia de las relaciones."
        ],
        mood: 'poetic'
    },
    'vsepr': {
        lines: [
            "Los electrones se repelen. La geometría emerge.",
            "Tetraedro, trigonal, lineal... formas moleculares.",
            "La repulsión crea estructura."
        ],
        mood: 'analytical'
    },

    // ═══════════════════════════════════════════════════════════════
    // BIOS - Biología
    // ═══════════════════════════════════════════════════════════════
    'adn-replicacion': {
        lines: [
            "La doble hélice se abre. La vida se copia.",
            "Watson y Crick vieron la estructura. Franklin tomó la foto.",
            "Cada error de copia... una posible mutación."
        ],
        mood: 'wonder'
    },
    'mitosis': {
        lines: [
            "Una célula se convierte en dos idénticas.",
            "Profase, metafase, anafase, telofase... el ballet cromosómico.",
            "Así crecemos, así sanamos."
        ],
        mood: 'respectful'
    },
    'meiosis': {
        lines: [
            "División para la reproducción. Mezcla genética.",
            "De diploides a haploides. De padres a hijos.",
            "La recombinación crea diversidad."
        ],
        mood: 'contemplative'
    },
    'evolucion': {
        lines: [
            "Darwin navegó cinco años para entenderlo.",
            "Los más aptos sobreviven. Los demás... enseñan.",
            "Millones de años de prueba y error."
        ],
        mood: 'reverent'
    },
    'genetica-poblacional': {
        lines: [
            "Los genes fluyen entre poblaciones.",
            "Hardy-Weinberg: el equilibrio teórico.",
            "La evolución es estadística."
        ],
        mood: 'analytical'
    },
    'ecosistema': {
        lines: [
            "Todo conectado. Productores, consumidores, descomponedores.",
            "Una red de dependencias.",
            "Quita una especie... y todo tiembla."
        ],
        mood: 'philosophical'
    },
    'krebs': {
        lines: [
            "El ciclo del ácido cítrico. Energía celular.",
            "Cada molécula de glucosa rinde 36 ATPs.",
            "La mitocondria es la central eléctrica."
        ],
        mood: 'analytical'
    },
    'glucolisis': {
        lines: [
            "De glucosa a piruvato. El primer paso.",
            "Diez reacciones. Dos ATPs.",
            "Tan antiguo que no necesita oxígeno."
        ],
        mood: 'respectful'
    },
    'sintesis-proteinas': {
        lines: [
            "Del gen a la proteína. El dogma central.",
            "Transcripción, traducción... el lenguaje de la vida.",
            "Cada proteína es una máquina molecular."
        ],
        mood: 'wonder'
    },

    // ═══════════════════════════════════════════════════════════════
    // PSYCHE - Neurociencia
    // ═══════════════════════════════════════════════════════════════
    'neurona': {
        lines: [
            "Hodgkin y Huxley descifraron el potencial de acción.",
            "Canales iónicos abriéndose y cerrándose.",
            "Cada pensamiento es una cascada eléctrica."
        ],
        mood: 'wonder'
    },
    'vision': {
        lines: [
            "La retina es un pedazo de cerebro expuesto al mundo.",
            "Conos para colores, bastones para sombras.",
            "Ver es interpretar, no solo capturar."
        ],
        mood: 'philosophical'
    },
    'ritmos-circadianos': {
        lines: [
            "El reloj interno. 24 horas de ciclo.",
            "La luz resetea el ritmo cada amanecer.",
            "Dormimos porque evolucionamos bajo estrellas."
        ],
        mood: 'contemplative'
    },

    // ═══════════════════════════════════════════════════════════════
    // AETHER - Música (exploraciones, no puzzles)
    // ═══════════════════════════════════════════════════════════════
    'tonnetz-chromatic': {
        lines: [
            "Un mapa de armonías. Euler lo soñó.",
            "Acordes vecinos comparten notas.",
            "La geometría del círculo de quintas."
        ],
        mood: 'reverent'
    },
    'tonnetz-dual': {
        lines: [
            "Mayor y menor, cara y cruz.",
            "El Tonnetz dual muestra la dualidad armónica.",
            "Riemann reorganizó la música en grafos."
        ],
        mood: 'analytical'
    },
    'cadencia-orbital': {
        lines: [
            "Las órbitas tienen cadencias propias.",
            "Kepler oía acordes en las proporciones planetarias.",
            "La música de las esferas, visualizada."
        ],
        mood: 'poetic'
    },
    'musica-esferas-moderna': {
        lines: [
            "Los planetas no suenan... pero sus proporciones cantan.",
            "Pitágoras tenía razón, a su manera.",
            "La armonía universal, traducida a frecuencias."
        ],
        mood: 'reverent'
    },
    'orbifold-walker': {
        lines: [
            "Caminando por espacios de acordes.",
            "Los orbifolds son topología musical.",
            "Cada paso es una transformación armónica."
        ],
        mood: 'playful'
    }
};

/**
 * Obtiene el fragmento para una simulación
 * @param {string} simId - ID de la simulación
 * @returns {object|null} - Fragmento con lines y mood, o null si no existe
 */
export function getFragment(simId) {
    return CONSTRUCTO_FRAGMENTS[simId] || null;
}

/**
 * Verifica si una simulación tiene fragmento (es exploración)
 * @param {string} simId - ID de la simulación
 * @returns {boolean}
 */
export function hasFragment(simId) {
    return simId in CONSTRUCTO_FRAGMENTS;
}

/**
 * Lista de puzzles centrales (NO tienen fragmentos)
 * Los puzzles centrales otorgan eigenvalores, las exploraciones dan resonancia
 */
export const CENTRAL_PUZZLES = [
    'harmonices-mundi',  // COSMOS
    'lorenz-attractor',  // CHAOS
    'mandelbrot',        // LOGOS
    'orbitales',         // ATOMOS (3D orbitales)
    'ondas-sismicas',    // TERRA
    'game-of-life',      // MACHINA
    'le-chatelier',      // ALCHEMY
    'neurona',           // BIOS
    'boids-masivo',      // PSYCHE
    'contrapunctus',     // AETHER (finale)
    'sympathetic-12',    // AETHER (lira oasis)
    'rameau-machine'     // AETHER (acto III)
];

/**
 * Verifica si es un puzzle central
 */
export function isCentralPuzzle(simId) {
    return CENTRAL_PUZZLES.includes(simId);
}
